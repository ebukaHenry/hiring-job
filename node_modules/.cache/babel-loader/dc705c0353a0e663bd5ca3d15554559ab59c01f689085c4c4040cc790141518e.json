{"ast":null,"code":"import{createContext,useState}from\"react\";import{jwtDecode}from\"jwt-decode\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext(null);export function AuthProvider(_ref){let{children}=_ref;const[authState,setAuthState]=useState(()=>{const token=localStorage.getItem(\"token\");if(token){try{const user=jwtDecode(token);return{user,token};}catch(error){console.error(\"Invalid token\");localStorage.removeItem(\"token\");}}return{user:null,token:null};});const login=token=>{try{const user=jwtDecode(token);localStorage.setItem(\"token\",token);setAuthState({user,token});}catch(error){console.error(\"Invalid token during login:\",error);logout();}};const logout=()=>{localStorage.removeItem(\"token\");setAuthState({user:null,token:null});};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:authState.user,token:authState.token,login,logout},children:children});}","map":{"version":3,"names":["createContext","useState","jwtDecode","jsx","_jsx","AuthContext","AuthProvider","_ref","children","authState","setAuthState","token","localStorage","getItem","user","error","console","removeItem","login","setItem","logout","Provider","value"],"sources":["C:/Users/HENRY/hiring-job/client/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\r\nimport {jwtDecode} from \"jwt-decode\"\r\n\r\nexport const AuthContext=createContext(null);\r\n\r\nexport function AuthProvider({children}) {\r\n    const [authState, setAuthState] = useState(()=>{\r\n        const token=localStorage.getItem(\"token\");\r\n        if(token){\r\n            try {\r\n                const user=jwtDecode(token);\r\n                return {user, token};\r\n            } catch (error) {\r\n                console.error(\"Invalid token\");\r\n                localStorage.removeItem(\"token\");\r\n            }\r\n        }\r\n        return {user:null, token:null}\r\n    });\r\n\r\n    const login= (token)=>{\r\n        try {\r\n            const user=jwtDecode(token);\r\n            localStorage.setItem(\"token\", token);\r\n            setAuthState({user, token});\r\n        } catch (error) {\r\n            console.error(\"Invalid token during login:\", error);\r\n            logout();\r\n        }\r\n    }\r\n\r\n    const logout =()=>{\r\n        localStorage.removeItem(\"token\");\r\n        setAuthState({user:null, token:null});\r\n    }\r\n\r\n    return(\r\n        <AuthContext.Provider value={{user:authState.user, token:authState.token, login, logout,}}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n    \r\n}"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAAQC,SAAS,KAAO,YAAY,QAAAC,GAAA,IAAAC,IAAA,yBAEpC,MAAO,MAAM,CAAAC,WAAW,cAACL,aAAa,CAAC,IAAI,CAAC,CAE5C,MAAO,SAAS,CAAAM,YAAYA,CAAAC,IAAA,CAAa,IAAZ,CAACC,QAAQ,CAAC,CAAAD,IAAA,CACnC,KAAM,CAACE,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAC3C,KAAM,CAAAU,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CACzC,GAAGF,KAAK,CAAC,CACL,GAAI,CACA,KAAM,CAAAG,IAAI,CAACZ,SAAS,CAACS,KAAK,CAAC,CAC3B,MAAO,CAACG,IAAI,CAAEH,KAAK,CAAC,CACxB,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAC,CAC9BH,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CACpC,CACJ,CACA,MAAO,CAACH,IAAI,CAAC,IAAI,CAAEH,KAAK,CAAC,IAAI,CAAC,CAClC,CAAC,CAAC,CAEF,KAAM,CAAAO,KAAK,CAAGP,KAAK,EAAG,CAClB,GAAI,CACA,KAAM,CAAAG,IAAI,CAACZ,SAAS,CAACS,KAAK,CAAC,CAC3BC,YAAY,CAACO,OAAO,CAAC,OAAO,CAAER,KAAK,CAAC,CACpCD,YAAY,CAAC,CAACI,IAAI,CAAEH,KAAK,CAAC,CAAC,CAC/B,CAAE,MAAOI,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDK,MAAM,CAAC,CAAC,CACZ,CACJ,CAAC,CAED,KAAM,CAAAA,MAAM,CAAEA,CAAA,GAAI,CACdR,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAChCP,YAAY,CAAC,CAACI,IAAI,CAAC,IAAI,CAAEH,KAAK,CAAC,IAAI,CAAC,CAAC,CACzC,CAAC,CAED,mBACIP,IAAA,CAACC,WAAW,CAACgB,QAAQ,EAACC,KAAK,CAAE,CAACR,IAAI,CAACL,SAAS,CAACK,IAAI,CAAEH,KAAK,CAACF,SAAS,CAACE,KAAK,CAAEO,KAAK,CAAEE,MAAO,CAAE,CAAAZ,QAAA,CACrFA,QAAQ,CACS,CAAC,CAG/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}