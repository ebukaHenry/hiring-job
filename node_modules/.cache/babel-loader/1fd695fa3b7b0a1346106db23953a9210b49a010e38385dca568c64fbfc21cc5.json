{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import Navbar from\"../components/Navbar\";import{AuthContext}from\"../context/AuthContext\";import{jwtDecode}from\"jwt-decode\";import axios from\"axios\";import CvUploads from\"./CvUpload\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const{token}=useContext(AuthContext);const[user,setUser]=useState(null);const[search,setSearch]=useState(\"\");const[jobs,setJobs]=useState([]);const[filteredJobs,setFilteredJobs]=useState([]);const handleSearch=input=>{setSearch(input);};useEffect(()=>{//const token = localStorage.getItem(\"token\");\nif(token){try{const decoded=jwtDecode(token);setUser(decoded);}catch(error){console.error(\"Invalid token\");setUser(null);}fetchjobs();}else{setUser(null);}},[token]);const fetchjobs=async()=>{const res=await axios.get(\"http://localhost:8080/api/jobs\",{headers:{Authorization:\"Bearer \".concat(token)}});setJobs(res.data);};useEffect(()=>{let filteredJobs=[...jobs];if(search){filteredJobs=filteredJobs.filter(job=>job.title.toLowerCase().includes(search.toLowerCase()));}setFilteredJobs(filteredJobs);},[search,jobs]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(Navbar,{onSearch:handleSearch}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[user&&/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"name\",children:[\"Welcome, \",user.full_name]}),/*#__PURE__*/_jsx(\"img\",{className:\"circle-img\",src:\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBgCPQmyPHrOWxnUvbmQIRwOipjW8woZUreA&s\",alt:\"\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom\",children:/*#__PURE__*/_jsx(\"p\",{className:\"info\",children:user.email})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"job-card\",children:filteredJobs.map(job=>/*#__PURE__*/_jsxs(\"div\",{className:\"job-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(\"span\",{children:job.title})}),/*#__PURE__*/_jsx(\"h6\",{children:/*#__PURE__*/_jsx(\"label\",{children:\"About the job\"})}),/*#__PURE__*/_jsx(\"p\",{children:job.description}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Company: \",job.company_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",job.location]}),/*#__PURE__*/_jsx(\"label\",{children:\"Key responsibilities:\"}),/*#__PURE__*/_jsx(\"p\",{children:job.job_type}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Salary: \",job.salary_range]}),/*#__PURE__*/_jsx(\"label\",{children:\"Apply here:\"}),/*#__PURE__*/_jsx(CvUploads,{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Posted: \",new Date(job.created_at).toLocaleDateString()]})]},job.id))})]})]});}export default Dashboard;","map":{"version":3,"names":["useContext","useEffect","useState","Navbar","AuthContext","jwtDecode","axios","CvUploads","jsx","_jsx","jsxs","_jsxs","Dashboard","token","user","setUser","search","setSearch","jobs","setJobs","filteredJobs","setFilteredJobs","handleSearch","input","decoded","error","console","fetchjobs","res","get","headers","Authorization","concat","data","filter","job","title","toLowerCase","includes","className","children","onSearch","full_name","src","alt","email","map","description","company_name","location","job_type","salary_range","Date","created_at","toLocaleDateString","id"],"sources":["C:/Users/HENRY/hiring-job/client/src/pages/Dashboard.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport axios from \"axios\";\r\nimport CvUploads from \"./CvUpload\";\r\n\r\nfunction Dashboard() {\r\n\r\n    const {token} = useContext(AuthContext);\r\n    const [user, setUser] = useState(null);\r\n    const [search, setSearch] = useState(\"\");\r\n    const [jobs, setJobs] = useState([]);\r\n    const [filteredJobs, setFilteredJobs] = useState([]);\r\n\r\n    const handleSearch=(input)=>{\r\n        setSearch(input);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        //const token = localStorage.getItem(\"token\");\r\n        if(token){\r\n            try {\r\n                const decoded=jwtDecode(token);\r\n                setUser(decoded);\r\n            } catch (error) {\r\n                console.error(\"Invalid token\");\r\n                setUser(null);\r\n            }\r\n            fetchjobs();\r\n        } else {\r\n            setUser(null);\r\n        }\r\n    },[token]);\r\n\r\n    const fetchjobs=async()=>{\r\n        const res= await axios.get(\"http://localhost:8080/api/jobs\",{\r\n            headers:{Authorization: `Bearer ${token}`}\r\n        });\r\n        setJobs(res.data);\r\n    }\r\n\r\n    useEffect(()=>{\r\n        let filteredJobs=[...jobs];\r\n        if(search){\r\n            filteredJobs=filteredJobs.filter(job=>job.title.toLowerCase().includes(search.toLowerCase()));\r\n        }\r\n        setFilteredJobs(filteredJobs);\r\n    },[search,jobs]);\r\n\r\n    return(\r\n        <div className=\"\">\r\n            \r\n            \r\n            <Navbar onSearch={handleSearch} />\r\n            <div className=\"page-container\">\r\n            {user && (\r\n            <div className=\"user-info\">\r\n                <div className=\"top\">\r\n                    <p className=\"name\">Welcome, {user.full_name}</p>\r\n                    <img className=\"circle-img\" src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSBgCPQmyPHrOWxnUvbmQIRwOipjW8woZUreA&s\" alt=\"\" />\r\n                </div>\r\n                <div className=\"bottom\">\r\n                    <p className=\"info\">{user.email}</p>\r\n                </div>\r\n            </div>)}\r\n\r\n            <div className=\"job-card\">\r\n            {filteredJobs.map(job=>(\r\n                <div className=\"job-container\" key={job.id}>\r\n                    <h3><span>{job.title}</span></h3>\r\n                    <h6><label>About the job</label></h6>\r\n                    <p>{job.description}</p>\r\n                    <h5>Company: {job.company_name}</h5>\r\n                    <p>Location: {job.location}</p>\r\n                    <label>Key responsibilities:</label>\r\n                    <p>{job.job_type}</p>\r\n                    <p>Salary: {job.salary_range}</p>\r\n                    <label>Apply here:</label>\r\n                    <CvUploads />\r\n                    <p>Posted: {new Date (job.created_at).toLocaleDateString()}</p>\r\n                </div>\r\n            ))}</div>\r\n            </div>\r\n            </div>\r\n       \r\n    );\r\n    \r\n}\r\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}