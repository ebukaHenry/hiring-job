{"ast":null,"code":"import _objectSpread from\"C:/Users/HENRY/hiring-job/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import{AuthContext}from\"../context/AuthContext\";import Navbar from\"../components/Navbar\";import{jwtDecode}from\"jwt-decode\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Admin(){const{token}=useContext(AuthContext);const user=token?jwtDecode(token):null;console.log(user);const[error,setError]=useState(\"\");const[success,setSuccess]=useState(\"\");const[applicants,setApplicants]=useState([]);const[isExtended,setIsExtended]=useState(false);const[jobDescription,setJobDescription]=useState({title:\"\",description:\"\",company_name:\"\",location:\"\",job_type:\"\",salary_range:\"\"});const clicked=()=>{setIsExtended(true);};const handleChange=async e=>{setJobDescription(jobDescription=>_objectSpread(_objectSpread({},jobDescription),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setError(\"\");try{const token=localStorage.getItem(\"token\");if(!token){setError(\"Not authorized!\");}if((user===null||user===void 0?void 0:user.role)!==\"merchant\"){setError(\"Unathorized user!\");}const res=await axios.post(\"http://localhost:8080/api/admin\",jobDescription,{headers:{Authorization:\"Bearer \".concat(token)}});console.log(\"Successful\",res.data);setSuccess(\"Job posted successfully\");setJobDescription({title:\"\",description:\"\",company_name:\"\",location:\"\",job_type:\"\",salary_range:\"\"});}catch(error){console.error(\"Something went wrong.\",error.message);setError(\"Post request failed!\");}};useEffect(()=>{const fetchApplicants=async()=>{const token=localStorage.getItem(\"token\");try{const res=await axios.get(\"http://localhost:8080/api/applicants\",{headers:{Authorization:\"Bearer \".concat(token)}});setApplicants(res.data);}catch(error){console.error(\"Failed to fetch applicants\",error.message);}};if(token){fetchApplicants();}},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-sidebar\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Merchant Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ID:\"}),\" \",user.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",user.full_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"admin-form\",type:\"subbmit\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Create job\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"Job title\",value:jobDescription.title,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company_name\",placeholder:\"Company name\",onClick:clicked,rows:isExtended?20:1,value:jobDescription.company_name,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",placeholder:\"Location\",value:jobDescription.location,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"job_type\",placeholder:\"Job type\",value:jobDescription.job_type,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"salary_range\",placeholder:\"Salary\",value:jobDescription.salary_range,onChange:handleChange}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"description\",placeholder:\"Job description\",value:jobDescription.description,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post Job\"}),success&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:success}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error})]})})]})}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Applicants:\"}),applicants.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No applicants found\"}):applicants.map(applicant=>/*#__PURE__*/_jsxs(\"div\",{className:\"applicant-card\",children:[/*#__PURE__*/_jsx(\"p\",{children:applicant.full_name}),/*#__PURE__*/_jsx(\"p\",{children:applicant.email}),applicant.cv&&/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:8080/uploads/\".concat(applicant.cv),target:\"_blank\",rel:\"noopener noreferrer\",children:\"View CV\"})]},applicant.id))]})]});}export default Admin;","map":{"version":3,"names":["useContext","useEffect","useState","axios","AuthContext","Navbar","jwtDecode","jsx","_jsx","jsxs","_jsxs","Admin","token","user","console","log","error","setError","success","setSuccess","applicants","setApplicants","isExtended","setIsExtended","jobDescription","setJobDescription","title","description","company_name","location","job_type","salary_range","clicked","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","localStorage","getItem","role","res","post","headers","Authorization","concat","data","message","fetchApplicants","get","children","className","id","full_name","email","type","onSubmit","placeholder","onChange","onClick","rows","style","color","length","map","applicant","cv","href","rel"],"sources":["C:/Users/HENRY/hiring-job/client/src/pages/Admin.jsx"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\n\r\nfunction Admin() {\r\n\r\n    const {token} = useContext(AuthContext);\r\n    const user = token ? jwtDecode(token) : null;\r\n    console.log(user);\r\n    \r\n    const [error, setError] = useState(\"\");\r\n    const [success, setSuccess] = useState(\"\");\r\n    const [applicants, setApplicants] = useState([]);\r\n    const [isExtended, setIsExtended] = useState(false);\r\n    const [jobDescription, setJobDescription] = useState({\r\n        title:\"\",\r\n        description:\"\",\r\n        company_name:\"\",\r\n        location:\"\",\r\n        job_type:\"\",\r\n        salary_range:\"\",\r\n    });\r\n\r\n    const clicked =()=>{\r\n        setIsExtended(true);\r\n    }\r\n\r\n    const handleChange= async(e)=>{\r\n        setJobDescription((jobDescription)=>({\r\n            ...jobDescription,\r\n            [e.target.name]:e.target.value,\r\n        })\r\n    );\r\n    }\r\n\r\n    const handleSubmit=async(e)=>{\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        try {\r\n            const token=localStorage.getItem(\"token\");\r\n            if(!token){\r\n                setError(\"Not authorized!\");\r\n            }\r\n            if(user?.role !==\"merchant\"){\r\n                setError(\"Unathorized user!\");\r\n            }\r\n            const res= await axios.post(\"http://localhost:8080/api/admin\", jobDescription,{\r\n                headers:{Authorization: `Bearer ${token}`}\r\n            });\r\n            console.log(\"Successful\", res.data);\r\n            setSuccess(\"Job posted successfully\");\r\n            setJobDescription({\r\n            title:\"\",\r\n            description:\"\",\r\n            company_name:\"\",\r\n            location:\"\",\r\n            job_type:\"\",\r\n            salary_range:\"\",});\r\n        } catch (error) {\r\n            console.error(\"Something went wrong.\",error.message);\r\n            setError(\"Post request failed!\");\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const fetchApplicants=async()=>{\r\n            const token=localStorage.getItem(\"token\");\r\n            try {\r\n                const res= await axios.get(\"http://localhost:8080/api/applicants\", {\r\n                    headers: {Authorization: `Bearer ${token}`},\r\n                });\r\n                setApplicants(res.data);\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch applicants\",error.message);\r\n            }\r\n        };\r\n        if(token){\r\n            fetchApplicants();\r\n        }\r\n        \r\n    },[]);\r\n\r\n    return(\r\n        <div>\r\n            <Navbar />\r\n        <section>\r\n        <div className=\"admin-page\">\r\n            <div className=\"admin-sidebar\">\r\n                <h2>Merchant Info</h2>\r\n                <p><strong>ID:</strong> {user.id}</p>\r\n                <p><strong>Name:</strong> {user.full_name}</p>\r\n                <p><strong>Email:</strong> {user.email}</p>\r\n            </div>\r\n            <div className=\"admin-content\">\r\n            <form className=\"admin-form\" type=\"subbmit\" onSubmit={handleSubmit}>\r\n                <h4>Create job</h4>\r\n                <input type=\"text\" name=\"title\" placeholder=\"Job title\" value={jobDescription.title} onChange={handleChange} />\r\n                <input type=\"text\" name=\"company_name\" placeholder=\"Company name\" onClick={clicked} rows={isExtended?20:1} value={jobDescription.company_name} onChange={handleChange} />\r\n                <input type=\"text\" name=\"location\" placeholder=\"Location\" value={jobDescription.location} onChange={handleChange} />\r\n                <input type=\"text\" name=\"job_type\" placeholder=\"Job type\" value={jobDescription.job_type} onChange={handleChange} />\r\n                <input type=\"text\" name=\"salary_range\" placeholder=\"Salary\" value={jobDescription.salary_range} onChange={handleChange} />\r\n                <textarea type=\"text\" name=\"description\" placeholder=\"Job description\" value={jobDescription.description} onChange={handleChange}/>\r\n                <button type=\"submit\">Post Job</button>\r\n                {success && <p style={{color: \"green\"}}>{success}</p>}\r\n                {error && <p style={{color: \"red\"}}>{error}</p>}\r\n            </form>\r\n            </div>\r\n        </div>\r\n        </section>\r\n        <section>\r\n            <h2>Applicants:</h2>\r\n            {applicants.length ===0 ? <p>No applicants found</p> : (\r\n            applicants.map((applicant)=>(\r\n                <div className=\"applicant-card\" key={applicant.id}>\r\n                    <p>{applicant.full_name}</p>\r\n                    <p>{applicant.email}</p>\r\n                    {applicant.cv && (\r\n                        <a href={`http://localhost:8080/uploads/${applicant.cv}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                            View CV\r\n                        </a>\r\n                    )}\r\n                </div>\r\n            ))\r\n            ) }\r\n        </section>\r\n        </div>\r\n    );\r\n    \r\n}\r\n\r\nexport default Admin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}